# ใช้ Node Image
FROM node:20-alpine

# ตั้ง Folder ทำงาน
WORKDIR /app

# ก๊อปปี้ package.json ก่อน
COPY package*.json ./

# ติดตั้ง Dependencies แบบยอมรับเวอร์ชันเก่าได้
RUN npm install --legacy-peer-deps

# ก๊อปปี้ไฟล์ทั้งหมด
COPY . .

# เปิด Port 80
EXPOSE 80

# สั่งรันแบบ Dev Server (แก้ไขโค้ดแล้วเห็นผลทันที)
CMD ["npm", "run", "dev", "--", "--host", "0.0.0.0", "--port", "80"]